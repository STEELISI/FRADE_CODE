{
  "name": "express-logging",
  "description": "Express middleware to log each request and response",
  "version": "1.1.1",
  "license": "Apache-2.0",
  "author": {
    "name": "Jorge Lorenzo Gallardo",
    "email": "jorge.lorenzogallardo@telefonica.com"
  },
  "contributors": [
    {
      "name": "Juan Antonio Hernando Labajo",
      "email": "juanantonio.hernandolabajo@telefonica.com"
    },
    {
      "name": "Guido García Bernardo",
      "email": "guido.garciabernardo@telefonica.com"
    }
  ],
  "repository": {
    "type": "git",
    "url": "git@github.com:telefonica/node-express-logging.git"
  },
  "main": "lib/logging",
  "engines": {
    "node": ">= 0.10.26"
  },
  "scripts": {
    "test": "mocha -R spec test/environment.js test/unit/*-test.js",
    "coverage": "istanbul cover ./node_modules/mocha/bin/_mocha -- -R dot test/environment.js test/unit/*-test.js",
    "lint": "jscs lib && eslint lib",
    "prepublish": "npm run test && npm run lint",
    "travis": "istanbul cover ./node_modules/mocha/bin/_mocha --report lcovonly -- -R spec test/environment.js test/*-test.js && cat ./coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js && rm -rf ./coverage"
  },
  "devDependencies": {
    "chai": "^3.0.0",
    "coveralls": "^2.11.2",
    "istanbul": "^0.3.16",
    "mocha": "^2.2.5",
    "proxyquire": "^1.5.0",
    "should": "^7.0.1",
    "sinon": "~1.15.3",
    "sinon-chai": "^2.8.0",
    "supertest": "^1.0.1",
    "xunit-file": "^0.0.4",
    "jscs": "^1.13.1",
    "eslint": "^0.23.0"
  },
  "dependencies": {
    "on-headers": "^1.0.0"
  },
  "keywords": [
    "logging",
    "express",
    "middleware"
  ],
  "readme": "# express-logging\n\nExpress middleware to log, using a configurable logger, each request and response.\n\n[![npm version](https://badge.fury.io/js/express-logging.svg)](http://badge.fury.io/js/express-logging)\n[![Build Status](https://travis-ci.org/telefonica/node-express-logging.svg)](https://travis-ci.org/telefonica/node-express-logging)\n[![Coverage Status](https://img.shields.io/coveralls/telefonica/node-express-logging.svg)](https://coveralls.io/r/telefonica/node-express-logging)\n\n## Installation\n\n```bash\nnpm install express-logging\n```\n\n## Basic usage\n\n```js\nvar express = require('express'),\n    expressLogging = require('express-logging'),\n    logger = require('logops');\n\nvar app = express();\napp.use(expressLogging(logger));\n\napp.listen(3000);\n```\n\n## Extended usage with options\n\nAn optional argument `options` can customize enhanced aspects for the logging. This argument is an object with the following elements:\n\n - `blacklist` is available to prevent some resources from being logged (for example, static resources). This argument is an array of strings. If the URL path starts with any of the elements of the blacklist array, then the logging of this request/response is ignored.\n - `policy` is a string to customize how the info is logged. It supports two values: `message` or `params`. The former serializes all the log entry into a single string message. The latter passes to the logger an object with the log entry parameters and a second argument with the message; this policy is useful in order to process these parameters by systems like logstash. The default value is `message`.\n\nThe following example would ignore any resource available at either `/images` or `/html`. It also activates the logging policy `params`.\n\n```js\nvar blacklist = ['/images', '/html'];\napp.use(expressLogging(logger, {blacklist: blacklist, policy: 'params'}));\n```\n\n## Logs\n\n### Logging with default policy **message**\n\nThe request is logged with:\n\n```js\nlogger.info('Request from %s: %s %s', clientIpAddress, requestMethod, requestUrl);\n```\n\nA response without `Location` header is logged with:\n\n```js\nlogger.info('Response with status %d in %d ms.', responseStatusCode, duration);\n```\n\nA response with `Location` header is logged with:\n\n```js\nlogger.info('Response with status %d in %d ms. Location: %s', responseStatusCode, duration, locationHeader);\n```\n\nBoth response log entries include the `duration` of the whole transaction (between receiving the request until replying with the response).\n\n### Logging with policy **params**\n\nThe request is logged with:\n\n```js\nvar params = {requestClientIp: requestClientIp, requestMethod: requestMethod, requestUrl: requestUrl};\nlogger.info(params, 'Request from %s: %s', requestMethod, requestUrl);\n```\n\nA response without `Location` header is logged with:\n\n```js\nvar params = {responseStatusCode: responseStatusCode, responseDuration: duration};\nlogger.info(params, 'Response with status %d', responseStatusCode);\n```\n\nA response with `Location` header is logged with:\n\n```js\nvar params = {responseStatusCode: responseStatusCode, responseDuration: duration, responseLocation: locationHeader};\nlogger.info(params, 'Response with status %d', responseStatusCode);\n```\n\nBoth response log entries include the `duration` of the whole transaction (between receiving the request until replying with the response).\n\n## License\n\nCopyright 2015, 2016 [Telefónica Investigación y Desarrollo, S.A.U](http://www.tid.es)\n\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at\n\nhttp://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/telefonica/node-express-logging/issues"
  },
  "_id": "express-logging@1.1.1",
  "dist": {
    "shasum": "7f713a1c3dadfbce7ce616ac77e8ee096894aa22"
  },
  "_from": "express-logging@",
  "_resolved": "https://registry.npmjs.org/express-logging/-/express-logging-1.1.1.tgz"
}
